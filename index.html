<html>

	<head>
		<!-- CSS -->
		<link rel="stylesheet" type="text/css" href="//cdn.datatables.net/1.10.6/css/jquery.dataTables.css">
		
		<!-- JS -->
		<script type="text/javascript" language="javascript" src="//code.jquery.com/jquery-1.11.1.min.js"></script>
		<script type="text/javascript" language="javascript" src="//cdn.datatables.net/1.10.6/js/jquery.dataTables.min.js"></script>
		
		<!-- JS Logic -->
		<script type="text/javascript" class="init">

			//variables
			var feedToTable = [];
			
			//helper functions
			var obj2array = function(obj) {
				return Object.keys(obj).map(function (key) {return obj[key]});
			}
		
			var drawTable = function() {
			
				$('#demo').html( '<table cellpadding="0" cellspacing="0" border="0" class="display" id="example"></table>' );
			 
				$('#example').dataTable( {
					"data": feedToTable,
					"columns": [
						{ "title": "Claim Number" },
						{ "title": "Claim Status" },
						{ "title": "District" },
						{ "title": "Issue Date" },
						{ "title": "Cancelled Date" },
						{ "title": "Recorded Date" },
						{ "title": "Anniversary Date" },
						{ "title": "Area (Ha)" },
						{ "title": "Owner Name" },
						{ "title": "Claim Name" }
					]
				} ); 
			
			}
		
			//featuresResponse.forEach(function(arr){console.log(arr.attributes)})
			//featuresResponse.forEach(function(arr){console.log(obj2array(arr.attributes))})
			//featuresResponse.forEach(function(arr){feedToTable.push(obj2array(arr.attributes))})
			
		
			//get real dataSet from ArcGIS
			$.ajax({
				type: 'GET',
				dataType: "jsonp",
				timeout: 60000,
				url: "http://www.mapconnect.com/arcgis/rest/services/test/nms/MapServer/4/query?text=&geometry=&geometryType=esriGeometryEnvelope&inSR=&spatialRel=esriSpatialRelIntersects&relationParam=&objectIds=&where=1%3D1&time=&returnCountOnly=false&returnIdsOnly=false&returnGeometry=false&maxAllowableOffset=&outSR=&outFields=CLAIM_NUM%2CCLAIM_STAT+&f=pjson",
				success: function (responseData, textStatus, jqXHR) {
					
					featuresResponse = responseData.features;												//extract the "attributes" Object
					featuresResponse.forEach(function(arr){feedToTable.push(obj2array(arr.attributes))})	//convert each attribute object to an array and push into feedToTable
										
					//re-draw table
					drawTable(); 
				},
				error: function (responseData, textStatus, errorThrown) {
					alert('failed');
				}
			});
			
			//the sample dataSet
			var dataSet = [
				['Trident','Internet Explorer 4.0','Win 95+','4','X'],
				['Trident','Internet Explorer 5.0','Win 95+','5','C']
			];
			
			//the datatable
			$(document).ready(function() {
				drawTable();
			} );
		
		</script>
		
	</head>
	
	<body>
	
		<div id="demo">
	
	</body>

</html>